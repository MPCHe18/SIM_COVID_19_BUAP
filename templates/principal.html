<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js"></script>
    <title>Simulador Covid-19</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo="/>
    <link rel="stylesheet" type="text/css" href= "{{ url_for('static', filename='styles/style.css') }}"/>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script type="text/javascript" src="static/js/main.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <div class="w3-sidebar w3-bar-block w3-border-right" style="display:none" id="mySidebar">
        <button onclick="w3_close()" class="w3-bar-item w3-large">Close &times;</button>
        <br>
        <!--<input type="range" min="1" max="100" value="50" class="slider" id="myRange">-->
        <div class="rangem">
            <div class="sliderValuem">
                <span id="spanm">50</span>
            </div>
            <div class="fieldm">
                <div class="value left">0</div>
                <input type="range" min="0" max="100" value="50" step="1" class="slider" name="NumPersonas" id="NumPersonas">
                <div class="value right">100</div>
            </div>
            <!-- <div class="mini_espacio_vacio"></div> -->
            <div class="name_field">
                Número de agentes
            </div>
        </div>
        <!-- <script>
            const slideValue = document.querySelector("span");
            const inputSlider = document.getElementById("NumPersonas");
            inputSlider.oninput = (()=>{
               let value = inputSlider.value;
               slideValue.textContent = value;
               });
        </script> -->
        <div class="espacio_vacio"></div>
        <div class="rangem2">
            <div class="sliderValuem2">
                <span2>50</span2>
            </div>
            <div class="fieldm2">
                <div class="value left">0</div>
                <input type="range" min="0" max="100" value="50" step="1" class="slider" name="NumInfectados" id="NumInfectados">
                <div class="value right">100</div>
            </div>
                A. Infectados
        </div>
        <!-- <script>
            const slideValue = document.querySelector("span2");
            const inputSlider = document.getElementById("NumInfectados");
            inputSlider.oninput = (()=>{
               let value = inputSlider.value;
               slideValue.textContent = value;
               });
        </script> -->
        <div class="espacio_vacio"></div>
        <div class="rangem3">
            <div class="sliderValuem3">
                <span3>50</span3>
            </div>
            <div class="fieldm3">
                <div class="value left">0</div>
                <input type="range" min="0" max="100" value="50" step="1" class="slider" name="NumVacunados" id="NumVacunados">
                <div class="value right">100</div>
            </div>
            A. vacunados
        </div>
        <!-- <script>
            const slideValue = document.querySelector("span3");
            const inputSlider = document.getElementById("NumVacunados");
            inputSlider.oninput = (()=>{
               let value = inputSlider.value;
               slideValue.textContent = value;
               });
        </script> -->
        <div class="espacio_vacio"></div>
        <div class="rangem4">
            <div class="sliderValuem4">
                <span4>50</span4>
            </div>
            <div class="fieldm4">
                <div class="value left">0</div>
                <input type="range" min="0" max="100" value="50" step="1" class="slider" name="Comorbilidades" id="Comorbilidades">
                <div class="value right">100</div>
            </div>
            A. comorbilidades
        </div>
        <!-- <script>
            const slideValue = document.querySelector("span4");
            const inputSlider = document.getElementById("Comorbilidades");
            inputSlider.oninput = (()=>{
               let value = inputSlider.value;
               slideValue.textContent = value;
               });
        </script> -->
        <div class="espacio_vacio"></div>
        <div class="rangem5">
            <div class="sliderValuem5">
                <span5>100</span5>
            </div>
            <div class="fieldm5">
                <div class="value left">0</div>
                <input type="range" min="0" max="200" value="100" step="1" class="slider" name="Dias" id="Dias">
                <div class="value right">200</div>
            </div>
            Dias a simular
        </div>
        <!-- <script>
            const slideValue = document.querySelector("span5");
            const inputSlider = document.getElementById("Dias");
            inputSlider.oninput = (()=>{
               let value = inputSlider.value;
               slideValue.textContent = value;
               });
        </script> -->
        <!-- <div class="espacio_vacio"></div> -->
        <button type="button" class="button button1" onclick="getData()">Configurar</button>
        
        <!-- <button type="button" onclick="getTick()">Iniciar</button>
        <button type="button" onclick="siguiente()">Siguiente</button> -->

        <!--<input type="range" min="0" max="50" value="25" step="1" class="slider" name="NumPersonas" id="NumPersonas">-->
        <!-- <input type="range" min="0" max="50" value="25" step="1" class="slider" name="NumInfectados" id="NumInfectados">
        <input type="range" min="0" max="50" value="25" step="1" class="slider" name="NumVacunados" id="NumVacunados">
        <input type="range" min="0" max="50" value="25" step="1" class="slider" name="Comorbilidades" id="Comorbilidades">
        <input type="range" min="0" max="200" value="25" step="1" class="slider" name="Dias" id="Dias"> -->
    </div> 
 <div id="Contenedor">
    <button class="w3-button w3-teal w3-xlarge" onclick="w3_open()">☰</button>
    <div id="cabecera">
        <p>Simulador de comportamiento de la pandemia por Covid-19</p>
        <input type="range" min="0" max="200" value="100" step="1" class="sliderT" name="sliderTime" id="sliderTime">
    </div>
    <div class="margen">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">
        <img src="static/images/covid.jpg" width="250" height="200">

    </div>
     <!-- <div id="menu">
         <div id="submenu"><p> Configuración de simulador</p></div>
         <form action="" id="form">
         <div class="range">
             <div class="sliderValue">
                 <span>25</span>
             </div>
             <div class="field">
                 <div class="value left">0</div>
                 <input type="range" min="0" max="50" value="25" step="1" name="NumPersonas" id="NumPersonas">
                 <div class="value right">50</div>
             </div>
             Número de agentes
         </div> -->
         <script>
             const slideValue = document.querySelector("span");
             const inputSlider = document.getElementById("NumPersonas");
             inputSlider.oninput = (()=>{
                let value = inputSlider.value;
                slideValue.textContent = value;
                });
         </script>

        <!-- <div id="espacio_vacio"></div>
         <div class="range2">
             <div class="sliderValue2">
                 <span2>25</span2>
             </div>
             <div class="field2">
                 <div class="value left">0</div>
                 <input type="range" min="0" max="50" value="25" step="1" name="NumInfectados" id="NumInfectados">
                 <div class="value right">50</div>
             </div>
             Número de agentes infectados
         </div> -->
         <script>
             const slideValue2 = document.querySelector("span2");
             const inputSlider2 = document.getElementById("NumInfectados");
             inputSlider2.oninput = (()=>{
                let value = inputSlider2.value;
                slideValue2.textContent = value;
                });
         </script>

        <!-- <div id="espacio_vacio2"></div>
         <div class="range3">
             <div class="sliderValue3">
                 <span3>25</span3>
             </div>
             <div class="field3">
                 <div class="value left">0</div>
                 <input type="range" min="0" max="50" value="25" step="1" name="NumVacunados" id="NumVacunados">
                 <div class="value right">50</div>
             </div>
             Número de agentes vacunados
         </div> -->
         <script>
             const slideValue3 = document.querySelector("span3");
             const inputSlider3 = document.getElementById("NumVacunados");
             inputSlider3.oninput = (()=>{
                let value = inputSlider3.value;
                slideValue3.textContent = value;
                });
         </script>

        <!-- <div id="espacio_vacio3"></div>
         <div class="range4">
             <div class="sliderValue4">
                 <span4>25</span4>
             </div>
             <div class="field4">
                 <div class="value left">0</div>
                 <input type="range" min="0" max="50" value="25" step="1" name="Comorbilidades" id="Comorbilidades">
                 <div class="value right">50</div>
             </div>
             Núm. de agentes con comorbilidades
         </div> -->
         <script>
             const slideValue4 = document.querySelector("span4");
             const inputSlider4 = document.getElementById("Comorbilidades");
             inputSlider4.oninput = (()=>{
                let value = inputSlider4.value;
                slideValue4.textContent = value;
                });
         </script>

        <!--<div id="espacio_vacio4"></div>
         <div class="range5">
             <div class="sliderValue5">
                 <span5>25</span5>
             </div>
             <div class="field5">
                 <div class="value left">0</div>
                 <input type="range" min="0" max="200" value="25" step="1" name="Dias" id="Dias">
                 <div class="value right">200</div>
             </div>
             Núm. de dias a simular
         </div>-->
         <script>
             const slideValue5 = document.querySelector("span5");
             const inputSlider5 = document.getElementById("Dias");
             inputSlider5.oninput = (()=>{
                let value = inputSlider5.value;
                slideValue5.textContent = value;
                });
         </script>

        <!--<button type="button" onclick="getData()">Configurar</button>
        <button type="button" onclick="getTick()">Iniciar</button>
        <button type="button" onclick="siguiente()">Siguiente</button>
         </form>
     </div> -->
     <div id="contenido">
               <!--Elemento Canvas para mostrar graficos personalizados-->
      <canvas
        id="dibujo"
        width="1000"
        height="600"
        style="
          cursor: crosshair;
          border: 2px solid grey;
          background: #d2d2ff;
          margin-left: 50px;
        "
      ></canvas>
         <div
        id="output"
        style="position: absolute; padding: 5px"
        class="non-selectable"
      ></div>
     </div>
    <div class="margen2">
        <img src="static/images/Infografia_Variantes.jpg" width="300" height="720">
    </div>
    <div id="grafica1">
         <canvas id="myChart1" width="390" height="350"  style="
          cursor: crosshair;
          border: 2px solid grey;
          background: #d2d2ff;
          margin-left: 3px;
        "></canvas>
    </div>
     <div id="grafica2">
         <canvas id="myChart2" width="390" height="350"  style="
          cursor: crosshair;
          border: 2px solid grey;
          background: #d2d2ff;
          margin-left: 3px;
        "></canvas>
     </div>
     <div id="grafica3">
         <canvas id="myChart3" width="390" height="350"  style="
          cursor: crosshair;
          border: 2px solid grey;
          background: #d2d2ff;
          margin-left: 3px;
        "></canvas>
     </div>
    <div class="margen3">
        <img src="static/images/prevention.png" width="300" height="355">
    </div>
     <div id="grafica4">
         <canvas id="myChart4" width="390" height="350"  style="
          cursor: crosshair;
          border: 2px solid grey;
          background: #d2d2ff;
          margin-left: 3px;
        "></canvas>
     </div>
     <div id="grafica5">
         <canvas id="myChart5" width="390" height="350"  style="
          cursor: crosshair;
          border: 2px solid grey;
          background: #d2d2ff;
          margin-left: 3px;
        "></canvas>
     </div>
     <div id="grafica6">

     </div>
     <div class="margen3">
        <img src="static/images/vacunacion.png" width="300" height="355">
    </div>
     <div id="descripcion">
         <center>
             <h1>Descripción del simulador</h1>
         </center>
     </div>
    <div class="figure1">
        <center>
        <h2>
            Programa principal
        </h2>
        </center>
        <p>
            Este programa simula el comportamiento de contagios debido a la enfermedad Covid-19, que es catalogada como una enfermedad aguda severa y que desde Marzo de 2020 fue catalogada por la Organización Mundial de la Salud como pandemia.<br>
El propósito de este trabajo es proporcionar una herramienta basada en factores reales de las principales comorbilidades en México, así como vacunas aplicadas en la misma región. Este simulador se basa en un modelo multiagente en donde las reglas de interacción son definidas en lenguaje Python y controladas por una entidad principal (Main).

        </p>
        <p><img src="static/images/principal.jpeg" width="600"
            height="900" alt="Torre Eiffel">
        <p>Modelo a escala de la torre Eiffel en el Parque Mini-France
        <div class="comentarios">
        <p>
            El diagrama del código principal se encarga de inicializar cada uno de los agentes que son definidos por el usuario. De igual manera, asigna atributos iniciales como estados de infección, vacunas y comorbilidades según sea el caso.
        </p>
        </div>
    </div>
    <div class="figure1">
        <center>
        <h2>
            Inicialización de agentes
        </h2>
        </center>

        <p><img src="static/images/Crea_agentes.jpeg" width="750"
            height="900" alt="Torre Eiffel">
        <p>Modelo a escala de la torre Eiffel en el Parque Mini-France
        <div class="comentarios">
        <p>
            Este ciclo crea a cada agente, iniciando con los atributos que por default debe tener cada agente, así como una posición inicial aleatoria. Posterior a esto se asignan atributos que son definidos por el usuario. <br>
A través de eventos aleatorios es posible determinar si un agente tendrá como parámetro inicial el estado de infección, vacuna y comorbilidad dependiendo la disponibilidad. Dentro del caso de infección, el agente podrá poseer un subestado que es Asintomático, el cual genera que el agente se recupere sin importar otros factores, sin embargo, éste podrá contagiar a otros agentes susceptibles.

        </p>
        </div>
    </div>
    <div class="figure1">
        <center>
        <h2>
            Evaluación de agentes
        </h2>
        </center>

        <p><img src="static/images/Evalua_agentes.jpeg" width="750"
            height="900" alt="Torre Eiffel">
        <p>Modelo a escala de la torre Eiffel en el Parque Mini-France
        <div class="comentarios">
        <p>
            El siguiente paso al finalizar la creación de agentes es la evaluación de los mismos por cada día (tick) de simulación. <br>
El proceso inicia al evaluar si el agente actual está vivo, ya que de lo contrario, si el agente fallece por la enfermedad éste deja de operar de la misma manera, cambiando su indicador de color a negro y permaneciendo estático, por lo que el resto de procesos no se evalúan. <br>
Si el agente está vivo, se evalúa el estado de infección o de inmunidad. Si el agente no cuenta con ninguno de estos estados, más sin embargo, está vivo, se determina que el agente se encuentra en el estado susceptible, que es un estado implícito del simulador. En este caso solo se evalúa si el agente recibe un mensaje de infección cuando entra en el radio de acción de un agente infectado. <br>
El mensaje de infección desencadena un proceso de evaluación basado en la probabilidad de infección por la vacuna. Se utiliza como factor esencial el porcentaje de inmunidad de la vacuna AstraZeneca, que es del 79%. Si la probabilidad de infección es del 100%, al restar la inmunidad de la vacuna y eliminar el porcentaje, se compara un número aleatorio asignado en la variable de evento de infección y se determina si existe un cambio de estado.

        </p>
        </div>
    </div>
    <div class="figure1">
        <center>
        <h2>
            Chequeo de infección
        </h2>
        </center>

        <p><img src="static/images/Infeccion.jpeg" width="600"
            height="900" alt="Torre Eiffel">
        <p>Modelo a escala de la torre Eiffel en el Parque Mini-France
        <div class="comentarios">
        <p>
            Si el agente presenta el estado de infectado, se hace un chequeo por cada tick de simulación durante la evaluación de agentes. El chequeo inicia con la evaluación de tiempo de enfermedad (TE) que es asignado de manera aleatoria. Si el tiempo es mayor a cero, entonces se ejecuta un sub-ciclo en el que se buscan a los agentes que se encuentran dentro del radio de acción del agente actual; a los agentes que se encuentran cerca se les asigna un mensaje de infección. <br>
En caso de que el tiempo de enfermedad haya finalizado, entonces se evalúa una transición de estados ya que el agente puede pasar al estado de inmunidad o fallecer.

        </p>
        </div>
    </div>
    <div class="figure1">
        <center>
        <h2>
            Evalúa estado
        </h2>
        </center>

        <p><img src="static/images/Estados.jpeg" width="600"
            height="900" alt="Torre Eiffel">
        <p>Modelo a escala de la torre Eiffel en el Parque Mini-France
        <div class="comentarios">
        <p>
            La transición de estados está influenciada primeramente por el estado de asintomático del agente, ya que en caso de tenerlo, su estado pasa a inmunidad de manera automática; el comportamiento de la enfermedad Covid-19 describe esta decisión. <br>
Si el agente no es asintomático, entonces se asigna un número aleatorio en su variable de evento de recuperación y posteriormente de evalúa si el agente cuenta con comorbilidades. Se utilizan las principales comorbilidades presentadas en México, y sus porcentajes de incidencia durante la pandemia por Covid-19. Si el agente no cuenta con comorbilidades, su probabilidad de recuperarse, dado el evento aleatorio, es mayor en comparación con un agente que si posee comorbilidades.

        </p>
        </div>
    </div>
    <div class="figure1">
        <center>
        <h2>
            Inmunidad
        </h2>
        </center>

        <p><img src="static/images/Inmunidad.jpeg" width="600"
            height="400" alt="Torre Eiffel">
        <p>Modelo a escala de la torre Eiffel en el Parque Mini-France
        <div class="comentarios">
        <p>
            Finalmente, dentro del ciclo de evaluación de agentes, si el agente presenta inmunidad, se evalúa únicamente el tiempo de inmunidad, asignado de manera aleatoria, ya que estos agentes solo pueden moverse pero no pueden ser contagiados hasta que su tiempo finaliza.
        </p>
        </div>
    </div>
 </div>
</body>
</html>